<!doctype html>
<html>
<head>
	<title>
		Book Jokey â€“ Viewer
	</title>
    <link rel="stylesheet" href="css/reset.css" type="text/css" media="screen" title="no title" charset="utf-8">
	<link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/make.css" type="text/css" media="screen" title="no title" charset="utf-8">
	<meta charset="utf-8">
</head>
<body>
	<div class = "header">
		<div class = "buttons">
			<div class = "left">
	  			<a href='# ' id="edit-button" class = "link">Edit</a>
	  		</div>
	  		<div class = "right">
				<a href='javascript:openTextbook();' class = link>Open</a>
				<a href='javascript:saveTextbook();' class = link>Save</a>
			</div>
		</div>
		<div>
			<a href='clipper.html'>Clipper</a>
			<a href='viewer_demo.html'>Demo</a>
		</div>
	</div>

	<div id="textbook">
  	</div>
	<ul id="add-buttons">
        <li id="add-pdf"><a>Add PDF</a></li>
        <li id="add-youtube"><a>Add YouTube</a></li>
        <li id="add-image"><a>Add Image</a></li>
        <li id="add-wiki"><a>Add Wikipedia</a></li>
        <li id="add-text"><a>Add Text</a></li>
  	</ul>

	<script src="libraries/jquery.js"></script>
	<script src="libraries/pdf.js" type="text/javascript"></script>
	<script src="libraries/compatibility.js" type="text/javascript"></script>
	<script src="js/viewer.js" type="text/javascript"></script>
	<script src="js/textbook.js" type="text/javascript"></script>
   	<script>
   		$(window).load(function() {
   			if (typeof(brackets.currentTextbook) != "undefined") {
					renderTextbook(document.getElementById('textbook'),brackets.currentTextbook);
				}
		});

	      function addElement() {
	        renderPdfHorizontal($('<div></div>').insertBefore('#add-buttons').get(0),
	            window.prompt("url?","http://www.cl.cam.ac.uk/teaching/1314/FJava/workbook4.pdf"),
	            window.prompt("start at?",""),
	            window.prompt("end at?",""));
	      }

	      $( document ).ready(function() {

	        $('#add-buttons').hide();

	        $('#add-pdf').click(function() {
	         addElement();
	        });

	        $('#edit-button').click(function() {
	        	$('#add-buttons').show();
	        })
	      });

   		function openTextbook() {
    		brackets.fs.showOpenDialog (false, false, "title1", "", null, function(err,fp) {
    				$("#textbook").html("");
            		$.getJSON(fp, function(textbook) {
    					brackets.currentTextbook = textbook;
    					renderTextbook(document.getElementById('textbook'),textbook);
    				});
        		});
		}

		function saveTextbook() {
    		brackets.fs.showSaveDialog("title2","","proposed_filename.lima", function(err,fp) {
    				brackets.fs.writeFile(fp, JSON.stringify(brackets.currentTextbook), "utf8", function(){});
    			});
		}
	</script>
</body>
</html>

<!doctype html>
<html>
<head>
	<title>
		BookJockey
	</title>
  <link rel="stylesheet" href="css/reset.css" type="text/css" media="screen" title="no title" charset="utf-8">
  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="css/index.css">

	<meta charset="utf-8">
</head>
<body>
	<div class = "header">
		<div class = "buttons">
			<div class = "left">
  		</div>
  		<div class = "right">
        <button id="new-button" type="button" onclick="javascript:newTextbook();" class="btn btn-primary">New</button>
        <button id="open-button" type="button" onclick="javascript:openTextbook();" class="btn btn-primary">Open</button>
        <button id="edit-button" type="button" class="btn btn-primary">Edit</button>
        <button id="save-button" type="button" onclick="javascript:saveTextbook();" class="btn btn-success">Save</button>
		  </div>
		</div>
	<!-- 	<div>
			<a href='clipper.html'>Clipper</a>
			<a href='viewer_demo.html'>Demo</a>
		</div> -->
	</div>

	<div id="textbook">
    <h1>Welcome to <b>BookJockey</b>. <small>Click 'New' above to get started!</small></h1>
  </div>

<!--   <ul id="add-buttons">
    <li id="add-pdf"><button type="button" class="btn btn-default">Add PDF</button></li>
    <li id="add-youtube"><button type="button" class="btn btn-default">Add YouTube</button></li>
    <li id="add-image"><button type="button" class="btn btn-default">Add Image</button></li>
    <li id="add-wiki"><button type="button" class="btn btn-default">Add Wikipedia</button></li>
    <li id="add-text"><button type="button" class="btn btn-default">Add Text</button></li>
	</ul> -->

  <!-- Nav tabs -->
  <div id="add-wrapper">
    <ul class="nav nav-tabs">
      <li class="active"><a href="#add-pdf" data-toggle="tab">Add PDF</a></li>
      <li><a href="#add-youtube" data-toggle="tab">Add YouTube</a></li>
      <li><a href="#add-image" data-toggle="tab">Add Image</a></li>
      <li><a href="#add-wiki" data-toggle="tab">Add Wikipedia</a></li>
      <li><a href="#add-text" data-toggle="tab">Add Text</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
      <div class="tab-pane active" id="add-pdf">
        <form class="form-horizontal" role="form">
          <div class="form-group">
            <label for="inputPdfUrl" class="col-sm-2 control-label">URL of PDF</label>
            <div class="col-sm-10">
              <input type="email" class="form-control" id="inputPdfUrl" placeholder="URL of PDF">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <button type="submit" class="btn btn-success pull-right">Add</button>
            </div>
          </div>
        </form>
      </div>
      <div class="tab-pane" id="add-youtube">...</div>
      <div class="tab-pane" id="add-image">
        <form class="form-horizontal" role="form">
          <div class="form-group">
            <label for="inputImageUrl" class="col-sm-2 control-label">URL of Image</label>
            <div class="col-sm-10">
              <input type="email" class="form-control" id="inputImageUrl" placeholder="URL of Image">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <button type="submit" class="btn btn-success pull-right">Add</button>
            </div>
          </div>
        </form>
      </div>
      <div class="tab-pane" id="add-wiki">...</div>
      <div class="tab-pane" id="add-text">...</div>
    </div>
  </div>

	<script src="libraries/jquery.js"></script>
	<script src="libraries/pdf.js" type="text/javascript"></script>
	<script src="libraries/compatibility.js" type="text/javascript"></script>
	<script src="js/viewer.js" type="text/javascript"></script>
	<script src="js/textbook.js" type="text/javascript"></script>
  <!-- Latest compiled and minified JavaScript -->
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
 	<script>
 		$(window).load(function() {
 			if (typeof(brackets.currentTextbook) != "undefined") {
				renderTextbook(document.getElementById('textbook'),brackets.currentTextbook);
			}
    });

    function addElement() {
    	var element = new Object();
    	element.source =  window.prompt("url?","http://www.cl.cam.ac.uk/teaching/1314/FJava/workbook4.pdf");
    	element.startY =  window.prompt("start at?","");
    	element.endY = window.prompt("end at?","");

      renderPdfHorizontal($('<div></div>').insertBefore('#add-buttons').get(0), element);
    }

    $( document ).ready(function() {

      $('#add-wrapper').hide();

      $('#add-pdf').click(function() {
       addElement();
      });

      $('#edit-button').click(function() {
      	$('#add-buttons').show();
      })
    });

		function openTextbook() {
  		brackets.fs.showOpenDialog (false, false, "title1", "", null, function(err,fp) {
  			$("#textbook").empty();
      	$.getJSON("file:///" + fp, function(textbook) {
          brackets.currentTextbook = textbook;
          renderTextbook(document.getElementById('textbook'),textbook);
			  });
  		});
    }

  	function saveTextbook() {
    	brackets.fs.showSaveDialog("title2","","proposed_filename.lima", function(err,fp) {
  			brackets.fs.writeFile(fp, JSON.stringify(brackets.currentTextbook), "utf8", function(){});
  		});
  	}

    function newTextbook() {
      $('#textbook').addClass("textbook_container")
          .html('<div class="bs-callout bs-callout-info"><h4>Your textbook is currently empty.</h4> <p>Click a button below to add content.</p>');
      $('#add-wrapper').show();
      brackets.currentTextbook = createNewTextbook();
    }

    function addPdf() {

    }

    function addYoutube() {

    }

    function addImage() {

    }

    function addWiki() {

    }

    function addText() {

    }
  </script>
</body>
</html>
